<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - JNSHOP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- HEADER DO ADMIN -->
        <header class="admin-header">
            <div class="header-info">
                <h1><i class="fas fa-user-shield"></i> PAINEL ADMIN</h1>
                <p>Bem-vindo, <span id="adminName">Admin</span></p>
            </div>
            <div class="header-actions">
                <button onclick="voltarAoSite()" class="btn-secondary">
                    <i class="fas fa-shopping-cart"></i> VOLTAR AO SITE
                </button>
                <button onclick="sairAdmin()" class="btn-danger">
                    <i class="fas fa-sign-out-alt"></i> SAIR
                </button>
            </div>
        </header>

        <!-- CARDS DE ESTAT√çSTICAS -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <div class="stat-info">
                    <span id="totalClientes">0</span>
                    <p>Clientes</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-gem"></i>
                <div class="stat-info">
                    <span id="codigosDisponiveis">0</span>
                    <p>Pins em Estoque</p>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <div class="stat-info">
                    <span id="codigosUsados">0</span>
                    <p>Pins Vendidos</p>
                </div>
            </div>
            
<div class="stat-card" style="border-left: 3px solid #00f2ff;">
    <i class="fas fa-globe"></i>
    <div class="stat-info">
        <span id="comprasGameflip">0</span>
        <p>Compras Gameflip</p>
    </div>
</div>
        </div>

        <!-- ABAS DE NAVEGA√á√ÉO -->
        <nav class="admin-tabs">
            <button class="admin-tab active" onclick="mostrarAba('clientes', event)">üë• CLIENTES</button>
            <button class="admin-tab" onclick="mostrarAba('codigos', event)">üíé ESTOQUE</button>
            
            <!-- ABA DE VENDAS ATUALIZADA -->
            <button class="admin-tab" onclick="mostrarAba('pagamentos', event)">
                <i class="fas fa-qrcode"></i> VENDAS PIX
            </button>
            
            <button class="admin-tab" onclick="mostrarAba('adicionar', event)">‚ûï NOVO PIN</button>
            <button class="admin-tab" onclick="mostrarAba('livros', event)">üìö LIVROS/MANGAS</button>

            <button class="admin-tab" onclick="mostrarAba('gameflip-dashboard', event)">
    <i class="fas fa-chart-line"></i> GAMEFLIP DASHBOARD
</button>
<button class="admin-tab" onclick="mostrarAba('gameflip-compras', event)">
    <i class="fas fa-shopping-cart"></i> COMPRAS GAMEFLIP
</button>
        </nav>

        <!-- CONTE√öDO DAS ABAS -->
        <main class="admin-content">
            
            <!-- GERENCIAR CLIENTES -->
            <section id="aba-clientes" class="admin-section">
                <h2>Gerenciar Clientes</h2>
                <div id="lista-clientes" class="table-container">Carregando...</div>
            </section>

            <!-- ESTOQUE DE PINS -->
            <section id="aba-codigos" class="admin-section" style="display:none;">
                <h2>C√≥digos no Sistema</h2>
                <div id="lista-codigos" class="table-container">Carregando...</div>
            </section>

            <!-- HIST√ìRICO DE VENDAS (EFI BANK) -->
            <section id="aba-pagamentos" class="admin-section" style="display:none;">
                <h2><i class="fas fa-file-invoice-dollar"></i> Relat√≥rio de Vendas EFI Bank</h2>
                <!-- ID AJUSTADO PARA A SUA FUN√á√ÉO carregarPagamentos -->
                <div id="lista-vendas-pix" class="table-container">Carregando vendas...</div>
            </section>

            <!-- FORMUL√ÅRIO NOVO PIN -->
            <section id="aba-adicionar" class="admin-section" style="display:none;">
                <div class="form-container">
                    <h2><i class="fas fa-plus-circle"></i> Novo PIN de Estoque</h2>
                    
                    <div class="form-group">
                        <label>Tipo de Produto</label>
                        <select id="newCategory" class="input-form">
                            <option value="freefire">üíé Free Fire (Diamantes)</option>
                            <option value="roblox">üü¶ Roblox (Robux)</option>
                            <option value="google_play">üü¢ Google Play</option>
                            <option value="playstation">üîµ PlayStation (PSN)</option>
                            <option value="steam">üíª Steam</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>C√≥digo do Pin</label>
                        <input type="text" id="newCode" placeholder="Ex: ABCD-1234-EFGH">
                    </div>

                    <div class="form-group">
                        <label>Valor em R$</label>
                        <input type="number" id="newAmount" placeholder="Ex: 10">
                    </div>

                    <button onclick="adicionarCodigo()" class="btn-success">
                        <i class="fas fa-save"></i> CADASTRAR C√ìDIGO
                    </button>
                </div>
            </section>
            

            <!-- GERENCIAR LIVROS -->
              <section id="aba-livros" class="admin-section" style="display:none;">
    <div class="form-container">
        <h2><i class="fas fa-plus-circle"></i> Adicionar Novo Livro/Manga</h2>
        
        <!-- Esta div "grid-form" √© o que o CSS usa para organizar -->
        <div class="grid-form">
            <div class="form-group">
                <label>T√≠tulo</label>
                <input type="text" id="bookTitle" placeholder="Ex: Solo Leveling Vol 1">
            </div>
            <div class="form-group">
                <label>Autor</label>
                <input type="text" id="bookAuthor" placeholder="Ex: Chugong">
            </div>
            <div class="form-group">
                <label>Categoria</label>
                <input type="text" id="bookCategory" placeholder="Ex: Manga">
            </div>
            <div class="form-group">
                <label>Link da Capa (JPG/PNG)</label>
                <input type="text" id="bookCover" placeholder="https://...">
            </div>
            <div class="form-group full-width"> <!-- full-width faz o link do Mega ser grand√£o -->
                <label>Link do Armazenamento MEGA</label>
                <input type="text" id="bookMega" placeholder="https://mega.nz/file/...">
            </div>
        </div>
        
        <button onclick="adicionarLivro()" class="btn-save-book">
            <i class="fas fa-save"></i> CADASTRAR NA BIBLIOTECA
        </button>
    </div>

    <h2 style="margin-top: 40px;">Livros Ativos</h2>
    <div id="lista-livros" class="table-container">Carregando...</div>
</section>


<!-- DASHBOARD GAMEFLIP -->
<section id="aba-gameflip-dashboard" class="admin-section" style="display:none;">
    <h2><i class="fas fa-chart-line"></i> Dashboard Gameflip</h2>
    <p style="color: #888; margin-bottom: 20px;">
        Monitore seu saldo, gastos e estat√≠sticas de compras autom√°ticas via Gameflip API
    </p>
    <div id="dashboard-gameflip">
        <div style="text-align: center; padding: 40px;">
            <i class="fas fa-spinner fa-spin" style="font-size: 40px; color: var(--secondary);"></i>
            <p>Carregando dados...</p>
        </div>
    </div>
</section>

<!-- HIST√ìRICO DE COMPRAS GAMEFLIP -->
<section id="aba-gameflip-compras" class="admin-section" style="display:none;">
    <h2><i class="fas fa-shopping-cart"></i> Hist√≥rico de Compras Gameflip</h2>
    
    <div class="info-box" style="background: rgba(0,242,255,0.1); border-left: 4px solid var(--secondary); padding: 15px; margin-bottom: 20px; border-radius: 8px;">
        <strong>‚ÑπÔ∏è Como funciona:</strong><br>
        Quando n√£o h√° c√≥digo manual dispon√≠vel, o sistema compra automaticamente no Gameflip e entrega ao cliente.
        Voc√™ pode retentar compras que falharam clicando no bot√£o "RETENTAR".
    </div>
    
    <div id="lista-compras-gameflip" class="table-container">
        <div style="text-align: center; padding: 40px;">
            <i class="fas fa-spinner fa-spin" style="font-size: 40px; color: var(--secondary);"></i>
            <p>Carregando compras...</p>
        </div>
    </div>
</section>
        </main>
    </div>

    <script src="admin.js"></script>
</body>
</html>